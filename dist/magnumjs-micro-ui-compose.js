/*!
 * @magnumjs/micro-ui v1.7.0
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUICompose=(()=>{var a=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var y=(t,e)=>{for(var n in e)a(t,n,{get:e[n],enumerable:!0})},S=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of h(e))!C.call(t,r)&&r!==n&&a(t,r,{get:()=>e[r],enumerable:!(o=_(e,r))||o.enumerable});return t};var g=t=>S(a({},"__esModule",{value:!0}),t);var v={};y(v,{computed:()=>I,shared:()=>U,useState:()=>E});function x(){let t=new Map;return{subscribe(e,n){t.has(e)||t.set(e,new Set);let o=t.get(e);return o.add(n),()=>o.delete(n)},emit(e,n){let o=t.get(e);if(o)for(let r of o)r(n)},clear(){t.clear()}}}function d(t){let e=t,n=new Set;function o(i){typeof e=="object"&&e!==null&&typeof i=="object"&&i!==null&&!Array.isArray(e)&&!Array.isArray(i)?e={...e,...i}:e=typeof i=="function"?i(e):i,n.forEach(u=>u(e))}function r(i){return n.add(i),i(e),()=>n.delete(i)}function s(){return e}return{get:s,setState:o,getState:s,subscribe:r}}var m=x(),f=new Map;function p(t,e={}){if(!f.has(t)){let n=d(e),o={...n,emit(r,s){n.setState(s),m.emit(`${t}::${r}`,n.getState())},on(r,s){return m.subscribe(`${t}::${r}`,s)}};f.set(t,o)}return f.get(t)}p.clear=()=>f.clear();var M=null;function c(){return M}function E(t){let e=d(t),n=()=>e.get(),o=s=>e.setState(s),r=c();if(r){let s=e.subscribe(()=>r.update());r.onUnmount(s)}return[n,o,e.subscribe]}function U(t,e={}){let n=p(t,e),o=c();if(o){let r=n.subscribe(()=>o.update());o.onUnmount(r)}return n}function I(t,e=[]){let n=t(),o=new Set;function r(){let u=t();u!==n&&(n=u,o.forEach(l=>l(n)))}let s=c(),i=[];for(let u of e){let l=typeof u=="function"?u:u?.subscribe;if(typeof l=="function"){let b=l(()=>{r(),s&&s.update()});i.push(b)}}return s&&s.onUnmount(()=>{i.forEach(u=>u&&u()),o.clear()}),{get value(){return n},subscribe(u){return o.add(u),u(n),()=>o.delete(u)},recompute:r}}return g(v);})();
//# sourceMappingURL=magnumjs-micro-ui-compose.js.map
