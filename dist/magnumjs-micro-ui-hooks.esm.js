/*!
 * @magnumjs/micro-ui v1.7.0
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
function p(){let n=new Map;return{subscribe(e,t){n.has(e)||n.set(e,new Set);let o=n.get(e);return o.add(t),()=>o.delete(t)},emit(e,t){let o=n.get(e);if(o)for(let r of o)r(t)},clear(){n.clear()}}}function i(n){let e=n,t=new Set;function o(u){typeof e=="object"&&e!==null&&typeof u=="object"&&u!==null&&!Array.isArray(e)&&!Array.isArray(u)?e={...e,...u}:e=typeof u=="function"?u(e):u,t.forEach(d=>d(e))}function r(u){return t.add(u),u(e),()=>t.delete(u)}function s(){return e}return{get:s,setState:o,getState:s,subscribe:r}}var a=p(),f=new Map;function c(n,e={}){if(!f.has(n)){let t=i(e),o={...t,emit(r,s){t.setState(s),a.emit(`${n}::${r}`,t.getState())},on(r,s){return a.subscribe(`${n}::${r}`,s)}};f.set(n,o)}return f.get(n)}c.clear=()=>f.clear();var m=null;function l(){return m}function b(n){let e=i(n),t=()=>e.get(),o=s=>e.setState(s),r=l();if(r){let s=e.subscribe(()=>r.update());r.onUnmount(s)}return[t,o,e.subscribe]}function h(n,e={}){let t=c(n,e),o=l();if(o){let r=t.subscribe(()=>o.update());o.onUnmount(r)}return t}function E(n,e={}){let t=l(),o=i({data:null,loading:!0,error:null});async function r(){o.setState(s=>({...s,loading:!0}));try{let u=await(await fetch(n,e)).json();o.setState({data:u,error:null,loading:!1}),t?.emit("fetch::done",{url:n,data:u})}catch(s){o.setState({data:null,error:s,loading:!1}),t?.emit("fetch::error",{url:n,error:s})}}return t&&(t.onMount(r),t.onEmit("fetch::refresh",r)),{get:o.get,subscribe:o.subscribe,refresh:r}}export{h as useContext,E as useFetch,b as useState};
//# sourceMappingURL=magnumjs-micro-ui-hooks.esm.js.map
