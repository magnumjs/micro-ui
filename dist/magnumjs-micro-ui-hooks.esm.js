/*!
 * @magnumjs/micro-ui v1.9.0
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var c=null;function i(){return c}function p(u,t={}){let e=i();if(!e)throw new Error("useFetch must be called inside a component render or lifecycle");(!e.state||e.state.data===void 0&&e.state.loading===void 0&&e.state.error===void 0)&&e.setState({data:null,loading:!0,error:null});async function o(){e.setState(n=>({...n,loading:!0})),console.log("fetch started");try{let r=await(await fetch(u,t)).json();e.setState({data:r,error:null,loading:!1}),console.log("fetch success",{data:r}),e.emit("fetch::done",{url:u,data:r})}catch(n){e.setState({data:null,error:n,loading:!1}),console.log("fetch error",{error:n}),e.emit("fetch::error",{url:u,error:n})}}return e.onMount(o),e.onEmit("fetch::refresh",o),{get:()=>({...e.state}),subscribe:n=>(e.onUpdate(()=>n({...e.state})),()=>{}),refresh:o}}var f={};function C(u,t={}){let e=i();if(!e)throw new Error("useContext() must be inside render()");f[u]||(f[u]={value:t,subs:new Set});let o=f[u];o.subs.add(e),e.onUnmount(()=>o.subs.delete(e));let n=r=>{o.value=typeof r=="function"?r(o.value):r,o.subs.forEach(s=>s.update())};return[o.value,n]}function x(u){let t=i();if(!t)throw new Error("useState must be inside render()");t._hasStateSetters||(t.state&&Object.keys(t.state).forEach(n=>{let r="set"+n.charAt(0).toUpperCase()+n.slice(1);t[r]||(t[r]=s=>{let l=t.state[n],a=typeof s=="function"?s(l):s;a!==l&&(t.state[n]=a,t.update())})}),t._hasStateSetters=!0);let e=t._renderIndex++;t._hooks||(t._hooks=[]),t._hooks[e]===void 0&&(t._hooks[e]=typeof u=="function"?u():u);let o=n=>{let r=t._hooks[e],s=typeof n=="function"?n(r):n;s!==r&&(t._hooks[e]=s,t.update())};return[t._hooks[e],o]}function S(u,t=[]){let e=i();if(!e)throw new Error("useEffect must be inside render()");let o=e._renderIndex++;e._hooks=e._hooks||[];let n=e._hooks[o]||[];if(t.length===0||t.some((s,l)=>s!==n[l])){let s;e.onUnmount(()=>s&&s()),s=u(),e._hooks[o]=t}}export{C as useContext,S as useEffect,p as useFetch,x as useState};
//# sourceMappingURL=magnumjs-micro-ui-hooks.esm.js.map
