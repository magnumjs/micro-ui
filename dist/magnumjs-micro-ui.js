/*!
 * @magnumjs/micro-ui v1.0.10
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUI=(()=>{var m=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var $=Object.prototype.hasOwnProperty;var j=(t,n)=>{for(var f in n)m(t,f,{get:n[f],enumerable:!0})},C=(t,n,f,c)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of S(n))!$.call(t,i)&&i!==f&&m(t,i,{get:()=>n[i],enumerable:!(c=M(n,i))||c.enumerable});return t};var _=t=>C(m({},"__esModule",{value:!0}),t);var W={};j(W,{createComponent:()=>A,createState:()=>O,renderList:()=>N});function L(t,n={}){if(typeof t=="string"){let{children:f={},slots:c={}}=n;t=t.replace(/<slot(?:\s+name="([^"]+)")?>([\s\S]*?)<\/slot>/gs,(i,l,r)=>{let{children:s,slots:e}=n;return l?typeof s=="object"&&s?.[l]!=null?s[l]:typeof e=="object"&&e?.[l]!=null?e[l]:r:typeof s=="object"&&s?.default!=null?s.default:typeof e=="object"&&e?.default!=null?e.default:typeof s=="string"?s:r}),t=t.replace(/<([a-z]+)([^>]*)\sdata-slot="([^"]+)"([^>]*)>(.*?)<\/\1>/gis,(i,l,r,s,e,a)=>{let d=typeof f=="object"&&f[s]||c[s]||a;return`<${l}${r}${e}>${d}</${l}>`})}return t||""}function T(t,n){if(!t)return!1;let f=document.createElement("div");f.innerHTML=n;let c=Array.from(f.children),i=Array.from(t.children),l=new Map,r=new Map;for(let e of c){let a=e.dataset.key;a&&l.set(a,e)}for(let e of i){let a=e.dataset.key;a&&r.set(a,e)}let s=0;for(let e of c){let a=e.dataset.key;if(a&&r.has(a)){let d=r.get(a);d.innerHTML!==e.innerHTML&&(d.innerHTML=e.innerHTML);let h=t.children[s];h!==d&&t.insertBefore(d,h||null),r.delete(a)}else{let d=t.children[s];t.insertBefore(e,d||null)}s++}for(let e of r.values())e.remove();for(;t.children.length>c.length;)t.lastChild.remove();return!0}function O(t){let n=t,f=new Set;function c(r){n=typeof r=="function"?r(n):{...n,...r},f.forEach(s=>s(n))}function i(r){return f.add(r),r(n),()=>f.delete(r)}function l(){return n}return{get:l,setState:c,getState:l,subscribe:i}}function A(t,{onMount:n,onDestroy:f,onBeforeMount:c,onBeforeUnmount:i,events:l={}}={}){let r=null,s=!1,e={},a="",d=!1,h={},p={refs:{},mount(o){if(s||d)return;let u=()=>{d=!0,r=o,s=!0,v(e),n?.call(p)};c?c?.length?c(u):Promise.resolve(c?.()).then(u):u()},mountTo(o){let u=document.querySelector(o);if(!u)throw new Error(`No element matches selector: ${o}`);p.mount(u)},update(o={}){if(!s)return;Object.keys(o).some(y=>o[y]!==e[y])&&(e={...e,...o},p.props=e,v(e))},render(o={}){e={...e,...o},p.props=e;let u=typeof t=="function"?t.call(p,e):t;return u=L(u,e),u===a?null:u},get renderFn(){return t},destroy(){if(!s||!r)return;let o=()=>{r.innerHTML="",s=!1,f?.call(p)};i?i?.length?i(o):Promise.resolve(i?.()).then(o):o()},get el(){return r},get state(){return h},setState:o=>{h=typeof o=="function"?o(h):{...h,...o},v(e)}};function v(o){e=o;let u=p.render(e);if(u===null)return;let y=T(r,u);p.refs={},r&&r.querySelectorAll("[data-ref]").forEach(g=>{p.refs[g.dataset.ref]=g}),H(y)}function H(){if(!r||!l)return;let o=r.firstElementChild;o&&Object.entries(l).forEach(([u,y])=>{let[g,k]=u.split(" ");if(!g)return;y._bound&&o.removeEventListener(g,y._bound);let w=b=>{let E=k?b.target.closest(k):b.target;E&&o.contains(E)&&y.call(p,b)};y._bound=w,o.addEventListener(g,w)})}return p}function N(t,n,f=c=>c.id??c.key??c){return t.map((c,i)=>{let l=f(c,i),r=n(c,i);return typeof r=="string"&&!r.trim().startsWith("<div")?`<div data-key="${l}">${r}</div>`:r.replace(/^<div/,`<div data-key="${l}"`)}).join("")}return _(W);})();
//# sourceMappingURL=magnumjs-micro-ui.js.map
