/*!
 * @magnumjs/micro-ui v1.0.8
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUI=(()=>{var m=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var H=(n,r)=>{for(var l in r)m(n,l,{get:r[l],enumerable:!0})},w=(n,r,l,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of k(r))!E.call(n,t)&&t!==l&&m(n,t,{get:()=>r[t],enumerable:!(o=T(r,t))||o.enumerable});return n};var j=n=>w(m({},"__esModule",{value:!0}),n);var _={};H(_,{createComponent:()=>S,createState:()=>C,renderList:()=>O});function v(n,r={}){return typeof n=="string"&&(n=n.replace(/<slot(?:\s+name="([^"]+)")?>([\s\S]*?)<\/slot>/gs,(l,o,t)=>{let{children:s,slots:e}=r;return o?typeof s=="object"&&s?.[o]!=null?s[o]:typeof e=="object"&&e?.[o]!=null?e[o]:t:typeof s=="object"&&s?.default!=null?s.default:typeof e=="object"&&e?.default!=null?e.default:typeof s=="string"?s:t})),n||""}function C(n){let r=n,l=new Set;function o(e){r=typeof e=="function"?e(r):{...r,...e},l.forEach(g=>g(r))}function t(e){return l.add(e),e(r),()=>l.delete(e)}function s(){return r}return{get:s,setState:o,getState:s,subscribe:t}}function S(n,{onMount:r,onDestroy:l,events:o={}}={}){let t=null,s=!1,e={},g="",d={refs:{},mount(i){s||(t=i,s=!0,b(e),r?.call(d))},mountTo(i){let f=document.querySelector(i);if(!f)throw new Error(`No element matches selector: ${i}`);d.mount(f)},update(i={}){if(!s)return;Object.keys(i).some(a=>i[a]!==e[a])&&(e={...e,...i},d.props=e,b(e))},render(i={}){e={...e,...i},d.props=e;let f=typeof n=="function"?n(e):n;return f=v(f,e),f===g?null:f},get renderFn(){return n},destroy(){!s||!t||(l?.call(d),t.innerHTML="",s=!1)},get el(){return t}};function b(i){e=i;let f=d.render(e);if(f===null)return;let a=L(f);d.refs={},t&&t.querySelectorAll("[data-ref]").forEach(p=>{d.refs[p.dataset.ref]=p}),M(a)}function L(i){if(!t)return!1;let f=document.createElement("div");f.innerHTML=i;let a=Array.from(f.children),p=new Map,y=new Map;for(let c of a){let u=c.dataset.key;u&&p.set(u,c)}for(let c of Array.from(t.children)){let u=c.dataset.key;u&&y.set(u,c)}t.innerHTML="";for(let c of a){let u=c.dataset.key;if(u&&y.has(u)){let h=y.get(u);h.innerHTML!==c.innerHTML&&(h.innerHTML=c.innerHTML),t.appendChild(h),y.delete(u)}else t.appendChild(c)}for(let c of y.values())c.remove();return!0}function M(){if(!t||!o)return;let i=t.firstElementChild;i&&Object.entries(o).forEach(([f,a])=>{let[p,y]=f.split(" ");if(!p)return;a._bound&&i.removeEventListener(p,a._bound);let c=u=>{let h=y?u.target.closest(y):u.target;h&&i.contains(h)&&a.call(d,u)};a._bound=c,i.addEventListener(p,c)})}return d}function O(n,r,l=o=>o.id??o.key??o){return n.map((o,t)=>{let s=l(o,t),e=r(o,t);return typeof e=="string"&&!e.trim().startsWith("<div")?`<div data-key="${s}">${e}</div>`:e.replace(/^<div/,`<div data-key="${s}"`)}).join("")}return j(_);})();
//# sourceMappingURL=magnumjs-micro-ui.js.map
