/*!
 * @magnumjs/micro-ui v1.0.7
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUI=(()=>{var m=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var H=Object.prototype.hasOwnProperty;var k=(t,r)=>{for(var i in r)m(t,i,{get:r[i],enumerable:!0})},w=(t,r,i,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of E(r))!H.call(t,e)&&e!==i&&m(t,e,{get:()=>r[e],enumerable:!(o=T(r,e))||o.enumerable});return t};var C=t=>w(m({},"__esModule",{value:!0}),t);var $={};k($,{createComponent:()=>O,createState:()=>j,renderList:()=>_});function L(t,r={}){return typeof t=="string"&&(t=t.replace(/<slot(?:\s+name="([^"]+)")?>(.*?)<\/slot>/gs,(i,o,e)=>S(o,r,e))),t}function S(t,r,i=""){let{children:o,slots:e}=r;return t?typeof o=="object"&&o[t]?o[t]:typeof e=="object"&&e[t]?e[t]:i:typeof o=="object"?o.default??i:o??i}function j(t){let r=t,i=new Set;function o(n){r=typeof n=="function"?n(r):{...r,...n},i.forEach(g=>g(r))}function e(n){return i.add(n),n(r),()=>i.delete(n)}function a(){return r}return{get:a,setState:o,getState:a,subscribe:e}}function O(t,{onMount:r,onDestroy:i,events:o={}}={}){let e=null,a=!1,n={},g="",d={refs:{},mount(s){a||(e=s,a=!0,v(n),r?.call(d))},mountTo(s){let c=document.querySelector(s);if(!c)throw new Error(`No element matches selector: ${s}`);d.mount(c)},update(s={}){if(!a)return;Object.keys(s).some(l=>s[l]!==n[l])&&(n={...n,...s},d.props=n,v(n))},render(s={}){n={...n,...s},d.props=n;let c=typeof t=="function"?t(n):t;return c=L(c,n),c===g?null:c},get renderFn(){return t},destroy(){!a||!e||(i?.call(d),e.innerHTML="",a=!1)},get el(){return e}};function v(s){n=s;let c=d.render(n);if(c===null)return;let l=b(c);d.refs={},e&&e.querySelectorAll("[data-ref]").forEach(p=>{d.refs[p.dataset.ref]=p}),M(l)}function b(s){if(!e)return!1;let c=document.createElement("div");c.innerHTML=s;let l=Array.from(c.children),p=new Map,y=new Map;for(let f of l){let u=f.dataset.key;u&&p.set(u,f)}for(let f of Array.from(e.children)){let u=f.dataset.key;u&&y.set(u,f)}e.innerHTML="";for(let f of l){let u=f.dataset.key;if(u&&y.has(u)){let h=y.get(u);h.innerHTML!==f.innerHTML&&(h.innerHTML=f.innerHTML),e.appendChild(h),y.delete(u)}else e.appendChild(f)}for(let f of y.values())f.remove();return!0}function M(){if(!e||!o)return;let s=e.firstElementChild;s&&Object.entries(o).forEach(([c,l])=>{let[p,y]=c.split(" ");if(!p)return;l._bound&&s.removeEventListener(p,l._bound);let f=u=>{let h=y?u.target.closest(y):u.target;h&&s.contains(h)&&l.call(d,u)};l._bound=f,s.addEventListener(p,f)})}return d}function _(t,r,i=o=>o.id??o.key??o){return t.map((o,e)=>{let a=i(o,e),n=r(o,e);return typeof n=="string"&&!n.trim().startsWith("<div")?`<div data-key="${a}">${n}</div>`:n.replace(/^<div/,`<div data-key="${a}"`)}).join("")}return C($);})();
//# sourceMappingURL=magnumjs-micro-ui.js.map
