/*!
 * @magnumjs/micro-ui v1.0.13
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUI=(()=>{var $=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var z=(t,s)=>{for(var r in s)$(t,r,{get:s[r],enumerable:!0})},K=(t,s,r,l)=>{if(s&&typeof s=="object"||typeof s=="function")for(let a of B(s))!I.call(t,a)&&a!==r&&$(t,a,{get:()=>s[a],enumerable:!(l=A(s,a))||l.enumerable});return t};var D=t=>K($({},"__esModule",{value:!0}),t);var J={};z(J,{createComponent:()=>Z,createState:()=>O,renderList:()=>G});function k(t,s={}){if(typeof t!="string")return"";let{children:r={},slots:l={}}=s;function a(d,n){return d?r&&typeof r=="object"&&r[d]!=null?r[d]:l&&typeof l=="object"&&l[d]!=null?l[d]:n:r&&typeof r=="object"&&r.default!=null?r.default:l&&typeof l=="object"&&l.default!=null?l.default:typeof r=="string"?r:n}return t=t.replace(/<slot(?:\s+name="([^"]+)")?>([\s\S]*?)<\/slot>/gis,(d,n,p)=>a(n,p)),t=t.replace(/<([a-z]+)([^>]*)\sdata-slot="([^"]+)"([^>]*)>([\s\S]*?)<\/\1>/gis,(d,n,p,e,f,i)=>{let h=a(e,i);return`<${n}${p}${f}>${h}</${n}>`}),t}function H(t,s){if(!t)return!1;let r=document.createElement("div");r.innerHTML=s;let l=Array.from(r.children),a=Array.from(t.children),d=new Map,n=new Map;for(let e of l){let f=e.dataset.key;f&&d.set(f,e)}for(let e of a){let f=e.dataset.key;f&&n.set(f,e)}let p=0;for(let e of l){let f=e.dataset.key,i=t.children[p];if(f&&n.has(f)){let h=n.get(f);h.innerHTML!==e.innerHTML&&(h.innerHTML=e.innerHTML),h!==i&&t.insertBefore(h,i||null),n.delete(f)}else t.insertBefore(e,i||null);p++}for(let e of n.values())e.remove();for(;t.children.length>l.length;)t.lastChild.remove();return!0}function O(t){let s=t,r=new Set;function l(n){s=typeof n=="function"?n(s):{...s,...n},r.forEach(p=>p(s))}function a(n){return r.add(n),n(s),()=>r.delete(n)}function d(){return s}return{get:d,setState:l,getState:d,subscribe:a}}function Z(t,{state:s={},on:r={},onMount:l,onUnmount:a,onBeforeMount:d,onBeforeUnmount:n,onUpdate:p}={}){let e=null,f=!1,i={},h=!1,E=[],m=s,v=null,g=!1,q={...s},_=o=>{m=typeof o=="function"?o(m):{...m,...o},b(i)},u={refs:{},setState:_,props:i,mount(o){if(f||h)return;let c=typeof o=="string"?document.querySelector(o):o;if(!c)throw new Error(`No element matches: ${o}`);w(d,()=>{h=!0,e=c,b(i),g||(f=!0,l?.call(u))})},update(o={}){if(!f)return;let c=o.on;c&&c!==r&&(r=c),i={...i,...o},u.props=i,b(i)},render(o={}){i={...i,...o},u.props=i;let c=typeof t=="function"?t.call(u,{state:m,setState:_,props:i,refs:u.refs}):t;return c=k(c,i),c},_resetInternal:()=>{v=null,g=!1,f=!1,h=!1,E=[],i={},m={...q}},unmount(){if(!f||!e)return;w(n,()=>{e.firstChild&&(v=e.firstChild.cloneNode(!0),e.removeChild(e.firstChild)),E.forEach(({node:c,type:y,listener:C})=>{c.removeEventListener(y,C)}),E=[],f=!1,h=!1,g=!0,a?.call(u),u._resetInternal&&u._resetInternal()})},get renderFn(){return t},get el(){return e},get state(){return m}};function b(o){i=o;let c=u.render(i);if(c===null||c===""){if(!g&&e&&e.firstChild){let y=e.firstChild;v=y.cloneNode(!0),w(n,()=>{e.contains(y)&&e.removeChild(y),f=!1,g=!0,a?.call(u)})}else g=!0;return}if(g&&v){e.appendChild(v),v=null,g=!1,f=!0,S(),l?.call(u);return}g=!1,H(e,c),u.refs={},e&&e.querySelectorAll("[data-ref]").forEach(y=>{u.refs[y.dataset.ref]=y}),S(),f&&p&&queueMicrotask(()=>p.call(u))}function w(o,c){o?o.length?o.call(u,c):Promise.resolve(o.call(u)).then(c):c()}function S(){if(!e||!r)return;let o=e.firstElementChild;o&&Object.entries(r).forEach(([c,y])=>{let[C,L]=c.split(" ");if(!C)return;let T=M=>{let j=L?M.target.closest(L):M.target;j&&o.contains(j)&&y.call(u,{event:M,state:m,setState:_,props:i,refs:u.refs})},N=`__microBound_${C}_${L||"root"}`;o[N]||(o.addEventListener(C,T),o[N]=!0,E.push({node:o,type:C,listener:T}))})}return u}function G(t,s,r=l=>l.id??l.key??l){return t.map((l,a)=>{let d=r(l,a),n=s(l,a);return typeof n=="string"?n.replace(/^<([a-zA-Z0-9-]+)/,`<$1 data-key="${String(d).replace(/"/g,"&quot;")}"`):n}).join("")}return D(J);})();
//# sourceMappingURL=magnumjs-micro-ui.js.map
