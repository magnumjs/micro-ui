/*!
 * @magnumjs/micro-ui v1.0.5
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUI=(()=>{var g=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var H=(s,n)=>{for(var a in n)g(s,a,{get:n[a],enumerable:!0})},w=(s,n,a,c)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of b(n))!k.call(s,t)&&t!==a&&g(s,t,{get:()=>n[t],enumerable:!(c=T(n,t))||c.enumerable});return s};var E=s=>w(g({},"__esModule",{value:!0}),s);var j={};H(j,{createComponent:()=>S,createState:()=>C,renderList:()=>$});function C(s){let n=s,a=new Set;function c(e){n=typeof e=="function"?e(n):{...n,...e},a.forEach(m=>m(n))}function t(e){return a.add(e),e(n),()=>a.delete(e)}function f(){return n}return{get:f,setState:c,getState:f,subscribe:t}}function S(s,{onMount:n,onDestroy:a,events:c={}}={}){let t=null,f=!1,e={},m="",d={mount(r){f||(t=r,f=!0,v(e),n?.call(d))},mountTo(r){let o=document.querySelector(r);if(!o)throw new Error(`No element matches selector: ${r}`);d.mount(o)},update(r={}){if(!f)return;Object.keys(r).some(u=>r[u]!==e[u])&&(e={...e,...r},d.props=e,v(e))},render(r={}){e={...e,...r},d.props=e;let o=typeof s=="function"?s(e):s;return typeof o=="string"&&o.includes("<slot></slot>")&&(o=o.replace("<slot></slot>",e.children??"")),o===m?null:o},get renderFn(){return s},destroy(){!f||!t||(a?.call(d),t.innerHTML="",f=!1)},get el(){return t}};function v(r){e=r;let o=d.render(e);if(o===null)return;let u=L(o);M(u)}function L(r){if(!t)return!1;let o=document.createElement("div");o.innerHTML=r;let u=Array.from(o.children),h=new Map,p=new Map;for(let i of u){let l=i.dataset.key;l&&h.set(l,i)}for(let i of Array.from(t.children)){let l=i.dataset.key;l&&p.set(l,i)}t.innerHTML="";for(let i of u){let l=i.dataset.key;if(l&&p.has(l)){let y=p.get(l);y.innerHTML!==i.innerHTML&&(y.innerHTML=i.innerHTML),t.appendChild(y),p.delete(l)}else t.appendChild(i)}for(let i of p.values())i.remove();return!0}function M(){if(!t||!c)return;let r=t.firstElementChild;r&&Object.entries(c).forEach(([o,u])=>{let[h,p]=o.split(" ");if(!h)return;u._bound&&r.removeEventListener(h,u._bound);let i=l=>{let y=p?l.target.closest(p):l.target;y&&r.contains(y)&&u.call(d,l)};u._bound=i,r.addEventListener(h,i)})}return d}function $(s,n,a=c=>c.id??c.key??c){return s.map((c,t)=>{let f=a(c,t),e=n(c,t);return typeof e=="string"&&!e.trim().startsWith("<div")?`<div data-key="${f}">${e}</div>`:e.replace(/^<div/,`<div data-key="${f}"`)}).join("")}return E(j);})();
//# sourceMappingURL=magnumjs-micro-ui.js.map
