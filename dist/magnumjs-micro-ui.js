/*!
 * @magnumjs/micro-ui v1.0.11
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUI=(()=>{var m=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var j=Object.prototype.hasOwnProperty;var C=(e,n)=>{for(var f in n)m(e,f,{get:n[f],enumerable:!0})},_=(e,n,f,c)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of $(n))!j.call(e,l)&&l!==f&&m(e,l,{get:()=>n[l],enumerable:!(c=S(n,l))||c.enumerable});return e};var O=e=>_(m({},"__esModule",{value:!0}),e);var q={};C(q,{createComponent:()=>N,createState:()=>A,renderList:()=>W});function L(e,n={}){if(typeof e=="string"){let{children:f={},slots:c={}}=n;e=e.replace(/<slot(?:\s+name="([^"]+)")?>([\s\S]*?)<\/slot>/gs,(l,i,r)=>{let{children:o,slots:t}=n;return i?typeof o=="object"&&o?.[i]!=null?o[i]:typeof t=="object"&&t?.[i]!=null?t[i]:r:typeof o=="object"&&o?.default!=null?o.default:typeof t=="object"&&t?.default!=null?t.default:typeof o=="string"?o:r}),e=e.replace(/<([a-z]+)([^>]*)\sdata-slot="([^"]+)"([^>]*)>(.*?)<\/\1>/gis,(l,i,r,o,t,u)=>{let d=typeof f=="object"&&f[o]||c[o]||u;return`<${i}${r}${t}>${d}</${i}>`})}return e||""}function M(e,n){if(!e)return!1;let f=document.createElement("div");f.innerHTML=n;let c=Array.from(f.children),l=Array.from(e.children),i=new Map,r=new Map;for(let t of c){let u=t.dataset.key;u&&i.set(u,t)}for(let t of l){let u=t.dataset.key;u&&r.set(u,t)}let o=0;for(let t of c){let u=t.dataset.key;if(u&&r.has(u)){let d=r.get(u);d.innerHTML!==t.innerHTML&&(d.innerHTML=t.innerHTML);let h=e.children[o];h!==d&&e.insertBefore(d,h||null),r.delete(u)}else{let d=e.children[o];e.insertBefore(t,d||null)}o++}for(let t of r.values())t.remove();for(;e.children.length>c.length;)e.lastChild.remove();return!0}function A(e){let n=e,f=new Set;function c(r){n=typeof r=="function"?r(n):{...n,...r},f.forEach(o=>o(n))}function l(r){return f.add(r),r(n),()=>f.delete(r)}function i(){return n}return{get:i,setState:c,getState:i,subscribe:l}}function N(e,{onMount:n,onUnmount:f,onBeforeMount:c,onBeforeUnmount:l,events:i={}}={}){let r=null,o=!1,t={},u="",d=!1,h={},p={refs:{},mount(s){if(o||d)return;w(c,()=>{d=!0,r=s,o=!0,v(t),n?.call(p)})},mountTo(s){let a=document.querySelector(s);if(!a)throw new Error(`No element matches selector: ${s}`);p.mount(a)},update(s={}){if(!o)return;Object.keys(s).some(y=>s[y]!==t[y])&&(t={...t,...s},p.props=t,v(t))},render(s={}){t={...t,...s},p.props=t;let a=typeof e=="function"?e.call(p,t):e;return a=L(a,t),a===u?null:a},get renderFn(){return e},unmount(){if(!o||!r)return;w(l,()=>{r.innerHTML="",o=!1,d=!1,f?.call(p)})},get el(){return r},get state(){return h},setState:s=>{h=typeof s=="function"?s(h):{...h,...s},v(t)}};function v(s){t=s;let a=p.render(t);if(a===null)return;let y=M(r,a);p.refs={},r&&r.querySelectorAll("[data-ref]").forEach(g=>{p.refs[g.dataset.ref]=g}),E(y)}function E(){if(!r||!i)return;let s=r.firstElementChild;s&&Object.entries(i).forEach(([a,y])=>{let[g,T]=a.split(" ");if(!g)return;y._bound&&s.removeEventListener(g,y._bound);let k=b=>{let H=T?b.target.closest(T):b.target;H&&s.contains(H)&&y.call(p,b)};y._bound=k,s.addEventListener(g,k)})}return p}function w(e,n){e?e?.length?e(n):Promise.resolve(e?.()).then(n):n()}function W(e,n,f=c=>c.id??c.key??c){return e.map((c,l)=>{let i=f(c,l),r=n(c,l);return typeof r=="string"&&!r.trim().startsWith("<div")?`<div data-key="${i}">${r}</div>`:r.replace(/^<div/,`<div data-key="${i}"`)}).join("")}return O(q);})();
//# sourceMappingURL=magnumjs-micro-ui.js.map
