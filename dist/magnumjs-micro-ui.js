/*!
 * @magnumjs/micro-ui v1.0.6
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUI=(()=>{var g=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var E=(s,n)=>{for(var a in n)g(s,a,{get:n[a],enumerable:!0})},H=(s,n,a,c)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of b(n))!k.call(s,t)&&t!==a&&g(s,t,{get:()=>n[t],enumerable:!(c=T(n,t))||c.enumerable});return s};var w=s=>H(g({},"__esModule",{value:!0}),s);var j={};E(j,{createComponent:()=>S,createState:()=>C,renderList:()=>$});function C(s){let n=s,a=new Set;function c(e){n=typeof e=="function"?e(n):{...n,...e},a.forEach(m=>m(n))}function t(e){return a.add(e),e(n),()=>a.delete(e)}function u(){return n}return{get:u,setState:c,getState:u,subscribe:t}}function S(s,{onMount:n,onDestroy:a,events:c={}}={}){let t=null,u=!1,e={},m="",d={refs:{},mount(r){u||(t=r,u=!0,v(e),n?.call(d))},mountTo(r){let o=document.querySelector(r);if(!o)throw new Error(`No element matches selector: ${r}`);d.mount(o)},update(r={}){if(!u)return;Object.keys(r).some(f=>r[f]!==e[f])&&(e={...e,...r},d.props=e,v(e))},render(r={}){e={...e,...r},d.props=e;let o=typeof s=="function"?s(e):s;return typeof o=="string"&&o.includes("<slot></slot>")&&(o=o.replace("<slot></slot>",e.children??"")),o===m?null:o},get renderFn(){return s},destroy(){!u||!t||(a?.call(d),t.innerHTML="",u=!1)},get el(){return t}};function v(r){e=r;let o=d.render(e);if(o===null)return;let f=L(o);d.refs={},t&&t.querySelectorAll("[data-ref]").forEach(p=>{d.refs[p.dataset.ref]=p}),M(f)}function L(r){if(!t)return!1;let o=document.createElement("div");o.innerHTML=r;let f=Array.from(o.children),p=new Map,y=new Map;for(let i of f){let l=i.dataset.key;l&&p.set(l,i)}for(let i of Array.from(t.children)){let l=i.dataset.key;l&&y.set(l,i)}t.innerHTML="";for(let i of f){let l=i.dataset.key;if(l&&y.has(l)){let h=y.get(l);h.innerHTML!==i.innerHTML&&(h.innerHTML=i.innerHTML),t.appendChild(h),y.delete(l)}else t.appendChild(i)}for(let i of y.values())i.remove();return!0}function M(){if(!t||!c)return;let r=t.firstElementChild;r&&Object.entries(c).forEach(([o,f])=>{let[p,y]=o.split(" ");if(!p)return;f._bound&&r.removeEventListener(p,f._bound);let i=l=>{let h=y?l.target.closest(y):l.target;h&&r.contains(h)&&f.call(d,l)};f._bound=i,r.addEventListener(p,i)})}return d}function $(s,n,a=c=>c.id??c.key??c){return s.map((c,t)=>{let u=a(c,t),e=n(c,t);return typeof e=="string"&&!e.trim().startsWith("<div")?`<div data-key="${u}">${e}</div>`:e.replace(/^<div/,`<div data-key="${u}"`)}).join("")}return w(j);})();
//# sourceMappingURL=magnumjs-micro-ui.js.map
