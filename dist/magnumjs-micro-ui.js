/*!
 * @magnumjs/micro-ui v1.0.14
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUI=(()=>{var H=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var K=Object.prototype.hasOwnProperty;var D=(t,f)=>{for(var r in f)H(t,r,{get:f[r],enumerable:!0})},O=(t,f,r,s)=>{if(f&&typeof f=="object"||typeof f=="function")for(let a of z(f))!K.call(t,a)&&a!==r&&H(t,a,{get:()=>f[a],enumerable:!(s=P(f,a))||s.enumerable});return t};var R=t=>O(H({},"__esModule",{value:!0}),t);var J={};D(J,{createComponent:()=>x,createState:()=>Z,renderList:()=>G});function T(t,f={}){if(typeof t!="string")return"";let{children:r={},slots:s={}}=f;function a(p,o){return p?r&&typeof r=="object"&&r[p]!=null?r[p]:s&&typeof s=="object"&&s[p]!=null?s[p]:o:r&&typeof r=="object"&&r.default!=null?r.default:s&&typeof s=="object"&&s.default!=null?s.default:typeof r=="string"?r:o}return t=t.replace(/<slot(?:\s+name="([^"]+)")?>([\s\S]*?)<\/slot>/gis,(p,o,h)=>a(o,h)),t=t.replace(/<([a-z]+)([^>]*)\sdata-slot="([^"]+)"([^>]*)>([\s\S]*?)<\/\1>/gis,(p,o,h,e,i,l)=>{let y=a(e,l);return`<${o}${h}${i}>${y}</${o}>`}),t}function N(t,f){if(!t)return!1;let r=document.createElement("div");r.innerHTML=f;let s=Array.from(r.children),a=Array.from(t.children),p=new Map,o=new Map;for(let e of s){let i=e.dataset.key;i&&p.set(i,e)}for(let e of a){let i=e.dataset.key;i&&o.set(i,e)}let h=0;for(let e of s){let i=e.dataset.key,l=t.children[h];if(i&&o.has(i)){let y=o.get(i);y.innerHTML!==e.innerHTML&&(y.innerHTML=e.innerHTML),y!==l&&t.insertBefore(y,l||null),o.delete(i)}else t.insertBefore(e,l||null);h++}for(let e of o.values())e.remove();for(;t.children.length>s.length;)t.lastChild.remove();return!0}function Z(t){let f=t,r=new Set;function s(o){f=typeof o=="function"?o(f):{...f,...o},r.forEach(h=>h(f))}function a(o){return r.add(o),o(f),()=>r.delete(o)}function p(){return f}return{get:p,setState:s,getState:p,subscribe:a}}function x(t,{state:f={},on:r={},onMount:s,onUnmount:a,onBeforeMount:p,onBeforeUnmount:o,onUpdate:h}={}){let e=null,i=!1,l={},y={},b=null,E=!1,_=[],v=f,C=null,g=!1,I={...f},w=!1,L=n=>{v=typeof n=="function"?n(v):{...v,...n},w||(w=!0,b={...l},queueMicrotask(()=>{w=!1,M(b),b=null}))},c={refs:{},setState:L,props:l,mount(n,u={}){if(i||E)return;let d=typeof n=="string"?document.querySelector(n):n;if(!d)throw new Error(`No element matches: ${n}`);$(p,()=>{E=!0,e=d,l={...l,...u},y={...l},c.props=l,M(l),g||(i=!0,s?.call(c))})},update(n={}){if(!i)return;let u=n.props?n.props:n,d=u.on;d&&d!==r&&(r=d);let m={...l,...u};y={...l},l=m,c.props=l,M(l)},render(n={}){l={...l,...n},c.props=l;let u=typeof t=="function"?t.call(c,{state:v,setState:L,props:l,refs:c.refs}):t;return u=T(u,l),u},_resetInternal:()=>{C=null,g=!1,i=!1,E=!1,_=[],l={},y={},v={...I}},unmount(){if(!i||!e)return;$(o,()=>{e.firstChild&&(C=e.firstChild.cloneNode(!0),e.removeChild(e.firstChild)),_.forEach(({node:u,type:d,listener:m})=>{u.removeEventListener(d,m)}),_=[],i=!1,E=!1,g=!0,a?.call(c),c._resetInternal&&c._resetInternal()})},get renderFn(){return t},get el(){return e},get state(){return v}};function M(n){l=n,c.props=l;let u=c.render(l);if(u===null||u===""){if(!g&&e&&e.firstChild){let d=e.firstChild;C=d.cloneNode(!0),$(o,()=>{e.contains(d)&&e.removeChild(d),i=!1,g=!0,a?.call(c)})}else g=!0;return}if(g&&C){e.appendChild(C),C=null,g=!1,i=!0,j(),s?.call(c);return}g=!1,N(e,u),c.refs={},e&&e.querySelectorAll("[data-ref]").forEach(d=>{c.refs[d.dataset.ref]=d}),j(),i&&h&&h.call(c,y)}function $(n,u){n?n.length?n.call(c,u):Promise.resolve(n.call(c)).then(u):u()}function j(){if(!e||!r)return;let n=e.firstElementChild;n&&Object.entries(r).forEach(([u,d])=>{let[m,S]=u.split(" ");if(!m)return;let q=k=>{let B=S?k.target.closest(S):k.target;B&&n.contains(B)&&d.call(c,{event:k,state:v,setState:L,props:l,refs:c.refs})},A=`__microBound_${m}_${S||"root"}`;n[A]||(n.addEventListener(m,q),n[A]=!0,_.push({node:n,type:m,listener:q}))})}return c}function G(t,f,r=s=>s.id??s.key??s){return t.map((s,a)=>{let p=r(s,a),o=f(s,a);return typeof o=="string"?o.replace(/^<([a-zA-Z0-9-]+)/,`<$1 data-key="${String(p).replace(/"/g,"&quot;")}"`):o}).join("")}return R(J);})();
//# sourceMappingURL=magnumjs-micro-ui.js.map
