/*!
 * @magnumjs/micro-ui v1.0.10
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUI=(()=>{var b=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var H=Object.prototype.hasOwnProperty;var S=(t,n)=>{for(var u in n)b(t,u,{get:n[u],enumerable:!0})},$=(t,n,u,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of E(n))!H.call(t,o)&&o!==u&&b(t,o,{get:()=>n[o],enumerable:!(i=w(n,o))||i.enumerable});return t};var j=t=>$(b({},"__esModule",{value:!0}),t);var A={};S(A,{createComponent:()=>_,createState:()=>C,renderList:()=>O});function m(t,n={}){if(typeof t=="string"){let{children:u={},slots:i={}}=n;t=t.replace(/<slot(?:\s+name="([^"]+)")?>([\s\S]*?)<\/slot>/gs,(o,s,e)=>{let{children:f,slots:r}=n;return s?typeof f=="object"&&f?.[s]!=null?f[s]:typeof r=="object"&&r?.[s]!=null?r[s]:e:typeof f=="object"&&f?.default!=null?f.default:typeof r=="object"&&r?.default!=null?r.default:typeof f=="string"?f:e}),t=t.replace(/<([a-z]+)([^>]*)\sdata-slot="([^"]+)"([^>]*)>(.*?)<\/\1>/gis,(o,s,e,f,r,a)=>{let l=typeof u=="object"&&u[f]||i[f]||a;return`<${s}${e}${r}>${l}</${s}>`})}return t||""}function v(t,n){if(!t)return!1;let u=document.createElement("div");u.innerHTML=n;let i=Array.from(u.children),o=Array.from(t.children),s=new Map,e=new Map;for(let r of i){let a=r.dataset.key;a&&s.set(a,r)}for(let r of o){let a=r.dataset.key;a&&e.set(a,r)}let f=0;for(let r of i){let a=r.dataset.key;if(a&&e.has(a)){let l=e.get(a);l.innerHTML!==r.innerHTML&&(l.innerHTML=r.innerHTML);let y=t.children[f];y!==l&&t.insertBefore(l,y||null),e.delete(a)}else{let l=t.children[f];t.insertBefore(r,l||null)}f++}for(let r of e.values())r.remove();for(;t.children.length>i.length;)t.lastChild.remove();return!0}function C(t){let n=t,u=new Set;function i(e){n=typeof e=="function"?e(n):{...n,...e},u.forEach(f=>f(n))}function o(e){return u.add(e),e(n),()=>u.delete(e)}function s(){return n}return{get:s,setState:i,getState:s,subscribe:o}}function _(t,{onMount:n,onDestroy:u,events:i={}}={}){let o=null,s=!1,e={},f="",r={},l={refs:{},mount(c){s||(o=c,s=!0,y(e),n?.call(l))},mountTo(c){let d=document.querySelector(c);if(!d)throw new Error(`No element matches selector: ${c}`);l.mount(d)},update(c={}){if(!s)return;Object.keys(c).some(p=>c[p]!==e[p])&&(e={...e,...c},l.props=e,y(e))},render(c={}){e={...e,...c},l.props=e;let d=typeof t=="function"?t.call(l,e):t;return d=m(d,e),d===f?null:d},get renderFn(){return t},destroy(){!s||!o||(u?.call(l),o.innerHTML="",s=!1)},get el(){return o},get state(){return r},setState:c=>{r=typeof c=="function"?c(r):{...r,...c},y(e)}};function y(c){e=c;let d=l.render(e);if(d===null)return;let p=v(o,d);l.refs={},o&&o.querySelectorAll("[data-ref]").forEach(h=>{l.refs[h.dataset.ref]=h}),k(p)}function k(){if(!o||!i)return;let c=o.firstElementChild;c&&Object.entries(i).forEach(([d,p])=>{let[h,L]=d.split(" ");if(!h)return;p._bound&&c.removeEventListener(h,p._bound);let M=g=>{let T=L?g.target.closest(L):g.target;T&&c.contains(T)&&p.call(l,g)};p._bound=M,c.addEventListener(h,M)})}return l}function O(t,n,u=i=>i.id??i.key??i){return t.map((i,o)=>{let s=u(i,o),e=n(i,o);return typeof e=="string"&&!e.trim().startsWith("<div")?`<div data-key="${s}">${e}</div>`:e.replace(/^<div/,`<div data-key="${s}"`)}).join("")}return j(A);})();
//# sourceMappingURL=magnumjs-micro-ui.js.map
