/*!
 * @magnumjs/micro-ui v1.9.0
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUIHooks=(()=>{var f=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var h=(o,t)=>{for(var e in t)f(o,e,{get:t[e],enumerable:!0})},_=(o,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of m(t))!p.call(o,n)&&n!==e&&f(o,n,{get:()=>t[n],enumerable:!(r=d(t,n))||r.enumerable});return o};var C=o=>_(f({},"__esModule",{value:!0}),o);var S={};h(S,{useContext:()=>x,useEffect:()=>E,useFetch:()=>g,useState:()=>y});var b=null;function i(){return b}function g(o,t={}){let e=i();if(!e)throw new Error("useFetch must be called inside a component render or lifecycle");(!e.state||e.state.data===void 0&&e.state.loading===void 0&&e.state.error===void 0)&&e.setState({data:null,loading:!0,error:null});async function r(){e.setState(n=>({...n,loading:!0})),console.log("fetch started");try{let s=await(await fetch(o,t)).json();e.setState({data:s,error:null,loading:!1}),console.log("fetch success",{data:s}),e.emit("fetch::done",{url:o,data:s})}catch(n){e.setState({data:null,error:n,loading:!1}),console.log("fetch error",{error:n}),e.emit("fetch::error",{url:o,error:n})}}return e.onMount(r),e.onEmit("fetch::refresh",r),{get:()=>({...e.state}),subscribe:n=>(e.onUpdate(()=>n({...e.state})),()=>{}),refresh:r}}var a={};function x(o,t={}){let e=i();if(!e)throw new Error("useContext() must be inside render()");a[o]||(a[o]={value:t,subs:new Set});let r=a[o];r.subs.add(e),e.onUnmount(()=>r.subs.delete(e));let n=s=>{r.value=typeof s=="function"?s(r.value):s,r.subs.forEach(u=>u.update())};return[r.value,n]}function y(o){let t=i();if(!t)throw new Error("useState must be inside render()");t._hasStateSetters||(t.state&&Object.keys(t.state).forEach(n=>{let s="set"+n.charAt(0).toUpperCase()+n.slice(1);t[s]||(t[s]=u=>{let l=t.state[n],c=typeof u=="function"?u(l):u;c!==l&&(t.state[n]=c,t.update())})}),t._hasStateSetters=!0);let e=t._renderIndex++;t._hooks||(t._hooks=[]),t._hooks[e]===void 0&&(t._hooks[e]=typeof o=="function"?o():o);let r=n=>{let s=t._hooks[e],u=typeof n=="function"?n(s):n;u!==s&&(t._hooks[e]=u,t.update())};return[t._hooks[e],r]}function E(o,t=[]){let e=i();if(!e)throw new Error("useEffect must be inside render()");let r=e._renderIndex++;e._hooks=e._hooks||[];let n=e._hooks[r]||[];if(t.length===0||t.some((u,l)=>u!==n[l])){let u;e.onUnmount(()=>u&&u()),u=o(),e._hooks[r]=t}}return C(S);})();
//# sourceMappingURL=magnumjs-micro-ui-hooks.js.map
