/*!
 * @magnumjs/micro-ui v1.7.0
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
var MicroUIHooks=(()=>{var c=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var C=Object.prototype.hasOwnProperty;var y=(t,e)=>{for(var n in e)c(t,n,{get:e[n],enumerable:!0})},S=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of _(e))!C.call(t,r)&&r!==n&&c(t,r,{get:()=>e[r],enumerable:!(o=h(e,r))||o.enumerable});return t};var g=t=>S(c({},"__esModule",{value:!0}),t);var U={};y(U,{useContext:()=>m,useFetch:()=>E,useState:()=>p});function x(){let t=new Map;return{subscribe(e,n){t.has(e)||t.set(e,new Set);let o=t.get(e);return o.add(n),()=>o.delete(n)},emit(e,n){let o=t.get(e);if(o)for(let r of o)r(n)},clear(){t.clear()}}}function i(t){let e=t,n=new Set;function o(u){typeof e=="object"&&e!==null&&typeof u=="object"&&u!==null&&!Array.isArray(e)&&!Array.isArray(u)?e={...e,...u}:e=typeof u=="function"?u(e):u,n.forEach(b=>b(e))}function r(u){return n.add(u),u(e),()=>n.delete(u)}function s(){return e}return{get:s,setState:o,getState:s,subscribe:r}}var d=x(),f=new Map;function a(t,e={}){if(!f.has(t)){let n=i(e),o={...n,emit(r,s){n.setState(s),d.emit(`${t}::${r}`,n.getState())},on(r,s){return d.subscribe(`${t}::${r}`,s)}};f.set(t,o)}return f.get(t)}a.clear=()=>f.clear();var M=null;function l(){return M}function p(t){let e=i(t),n=()=>e.get(),o=s=>e.setState(s),r=l();if(r){let s=e.subscribe(()=>r.update());r.onUnmount(s)}return[n,o,e.subscribe]}function m(t,e={}){let n=a(t,e),o=l();if(o){let r=n.subscribe(()=>o.update());o.onUnmount(r)}return n}function E(t,e={}){let n=l(),o=i({data:null,loading:!0,error:null});async function r(){o.setState(s=>({...s,loading:!0}));try{let u=await(await fetch(t,e)).json();o.setState({data:u,error:null,loading:!1}),n?.emit("fetch::done",{url:t,data:u})}catch(s){o.setState({data:null,error:s,loading:!1}),n?.emit("fetch::error",{url:t,error:s})}}return n&&(n.onMount(r),n.onEmit("fetch::refresh",r)),{get:o.get,subscribe:o.subscribe,refresh:r}}return g(U);})();
//# sourceMappingURL=magnumjs-micro-ui-hooks.js.map
