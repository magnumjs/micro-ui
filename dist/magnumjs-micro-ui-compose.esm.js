/*!
 * @magnumjs/micro-ui v1.7.0
 * Author: Michael Glazer
 * Website: https://github.com/magnumjs/micro-ui#readme
 */
function b(){let n=new Map;return{subscribe(e,t){n.has(e)||n.set(e,new Set);let o=n.get(e);return o.add(t),()=>o.delete(t)},emit(e,t){let o=n.get(e);if(o)for(let r of o)r(t)},clear(){n.clear()}}}function a(n){let e=n,t=new Set;function o(i){typeof e=="object"&&e!==null&&typeof i=="object"&&i!==null&&!Array.isArray(e)&&!Array.isArray(i)?e={...e,...i}:e=typeof i=="function"?i(e):i,t.forEach(u=>u(e))}function r(i){return t.add(i),i(e),()=>t.delete(i)}function s(){return e}return{get:s,setState:o,getState:s,subscribe:r}}var p=b(),f=new Map;function d(n,e={}){if(!f.has(n)){let t=a(e),o={...t,emit(r,s){t.setState(s),p.emit(`${n}::${r}`,t.getState())},on(r,s){return p.subscribe(`${n}::${r}`,s)}};f.set(n,o)}return f.get(n)}d.clear=()=>f.clear();var _=null;function c(){return _}function g(n){let e=a(n),t=()=>e.get(),o=s=>e.setState(s),r=c();if(r){let s=e.subscribe(()=>r.update());r.onUnmount(s)}return[t,o,e.subscribe]}function x(n,e={}){let t=d(n,e),o=c();if(o){let r=t.subscribe(()=>o.update());o.onUnmount(r)}return t}function M(n,e=[]){let t=n(),o=new Set;function r(){let u=n();u!==t&&(t=u,o.forEach(l=>l(t)))}let s=c(),i=[];for(let u of e){let l=typeof u=="function"?u:u?.subscribe;if(typeof l=="function"){let m=l(()=>{r(),s&&s.update()});i.push(m)}}return s&&s.onUnmount(()=>{i.forEach(u=>u&&u()),o.clear()}),{get value(){return t},subscribe(u){return o.add(u),u(t),()=>o.delete(u)},recompute:r}}export{M as computed,x as shared,g as useState};
//# sourceMappingURL=magnumjs-micro-ui-compose.esm.js.map
